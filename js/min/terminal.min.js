class Terminal{#e;#t=[];help='\n        <div>\n            <pre>\n<span class="token comment">-----------------------------</span>\n    <span class="class-name token">Commands:</span>\n        - window [add | remove] [:int]\n            usage:\n                window add 3\n        \n        - terminal [close | open]\n            usage:\n                terminal close\n        \n        - terminal [color | bg] [set | get | reset] [:hex | :rgb | :hsl]    (not implemented)\n            usage:\n                terminal color set #fff\n        \n        - config [set | get | reset]\n            usage:\n                config get\n\n        - font [set | get | reset] [:int]\n            usage:\n                font set +3\n\n        - theme [set | get | reset | list] [:string]\n            usage:\n                theme set dark\n\n        - run [:int (windows: 0-3, default: 0)]\n            usage:\n                run 1\n\n        - execute [:int (windows: 0-3, default: 0)]\n            usage:\n                execute 0\n\n        - cls\n    \n        - exit\n    \n        - help\n    \n    <span class="class-name token">More info:</span>\n        <a href="https://github.com/ZhengLinLei/paste-code">https://github.com/ZhengLinLei/paste-code</a>\n    \n    <span class="class-name token">Issues:</span>\n        <a href="https://github.com/ZhengLinLei/paste-code/issues">https://github.com/ZhengLinLei/paste-code/issues</a>\n    \n    <span class="class-name token">Author:</span>\n        <a href="https://github.com/ZhengLinLei">Zheng Lin Lei</a>\n<span class="token comment">-----------------------------</span>\n            </pre>\n        </div>\n    ';executer={python:"https://pyscript.net/latest/pyscript.js",javascript:"./js/src/executer.js"};constructor(e){this.#e=e}commands={window:["add","remove"],terminal:["close","open"],cls:0,exit:0,help:0,config:["set","get","reset"],font:["set","get","reset"],theme:["set","get","reset","list"],run:0,execute:0};exec=e=>new Promise((t=>{let n=e.split(" ");this.#t.push(e),Object.keys(this.commands).includes(n[0])&&((0==this.commands[n[0]]||this.commands[n[0]].includes(n[1]))&&t(this.execution[n[0]](n)),t([0,`Path "${n[1]}" not found`])),t([0,`Command "${n[0]}" not found`])}));execution={terminal:e=>(this.#e.terminal.toggleFnc(e[1]),[1,""]),window:e=>{let t=0;if(e.length>2){if(!parseInt(e[2]))return[0,`Invalid argument ${e[2]}`];t=parseInt(e[2])}else t=1;for(let n=0;n<t;n++)"add"==e[1]?this.#e.window.add():this.#e.window.remove();return[1,""]},exit:()=>(this.#e.terminal.toggleFnc("close"),[1,""]),cls:()=>(this.#e.terminal.output.innerHTML="",this.#e.terminal.caret.style.transform="translateX(0px)",this.#e.terminal.config.position=0,[1,""]),help:()=>[1,this.help],config:e=>{let t={},n=[1,'\n                <br>\n                <div>\n                    <span>Reload required <a href="javascript:location.reload()">[yes]</a><a>[no]</a></span>\n                </div>\n                <br>\n                '];switch(e[1]){case"set":t=JSON.parse(e.slice(2).join("")),Object.entries(t).forEach((([e,t])=>{"undefined"!==t&&"null"!==t&&"NaN"!==t||(n=[0,`Invalid value ${t}`]),"default"!=t?localStorage.setItem(e,t):localStorage.removeItem(e)}));break;case"get":t={terminal:localStorage.getItem("terminal")||!1,terminalHeight:localStorage.getItem("terminalHeight")||"default",terminalOptWidth:localStorage.getItem("terminalOptWidth")||"default",fontSize:localStorage.getItem("fontSize")||"default",theme:localStorage.getItem("theme")||"default"},n=[1,`\n                        <br>\n                        <div>\n                            <pre><code class="language-json">${Prism.highlight(JSON.stringify(t,null,4).trim(),Prism.languages.json,"json")}</code></pre>\n                        </div>\n                        <div>\n                            <span>config set ${JSON.stringify(t)}</span>\n                        </div>\n                        <br>\n                        `];break;case"reset":localStorage.clear()}return n},font:e=>{let t=[1,""],n=document.documentElement||document.querySelector(":root"),s=parseInt(window.getComputedStyle(n,null).getPropertyValue("font-size").replace("px",""));switch(e[1]){case"set":if(e[2].match(/[-+]/)){s=s+parseInt(e[2])}else s=parseInt(e[2]);break;case"get":t=[1,`<br><div><span>Font size: <span class="token comment">${s}px</span></span></div><br>`];break;case"reset":s=12}return"get"!=e[1]&&n.style.setProperty("--font-size",`${s}px`),localStorage.setItem("fontSize",s),t},theme:e=>{let t=[1,""];switch(e[1]){case"set":this.#e.theme.list.includes(e[2])?this.#e.theme.set(e[2]):t=[0,`Theme "${e[2]}" not found`];break;case"get":t=[1,`<div><span>Current theme: <span class="token comment">${localStorage.getItem("theme")||this.#e.theme.list[0]}</span></span></div>`];break;case"reset":this.#e.theme.set("light");break;case"list":t=[1,`<div><span>Theme list: <span class="token comment">${this.#e.theme.list.join(", ")}</span></span><p>See <a href="https://github.com/ZhengLinLei/paste-code/blob/main/THEME.md">https://github.com/ZhengLinLei/paste-code/blob/main/THEME.md</a> to customise themes.</div>`]}return t},run:e=>{if(e.length>=2&&"list"==e[1])return[1,`<div><span>Executer supported languages: <span class="token comment">${Object.keys(this.executer).join(", ")}</span></span></div><br>`];let t=[0,'\n                <div>\n                    <span>Language not found.</span>\n                </div>\n                <div>\n                    <span>Example: <span class="token comment">!PY</span></span>\n                </div>\n            '],n=e[1]||0,s=this.#e.window.config.windows[n];if(!s)return[0,`Window ${n} not found`];let a=s.value;const i=a.split("\n")[0];if(!i.includes("!"))return t;let r=i.split("!");const o=r[r.length-1].toLowerCase();let l=Object.entries({python:["python","py"],javascript:["javascript","js"]}).find((([e,t])=>t.includes(o)))[0];if(!l)return[0,`Language "${o}" not executable. See <a href="https://github.com/ZhengLinLei/paste-code/blob/main/EXECUTER.md">https://github.com/ZhengLinLei/paste-code/blob/main/EXECUTER.md</a> for more information.`];let c=this.executer[l],h=document.querySelector(`script[src="${c}"]`);h||(h=document.createElement("script"),h.setAttribute("defer","true"),h.src=c,document.body.appendChild(h));let p=`b${Math.random().toString(36).substring(7)}b`;switch(TMP_ID=p,this.#e.terminal.output.innerHTML+=`<div id="${p}"></div>`,l){case"python":a=a.replace(/print\(/g,"Out(");let e=document.createElement("py-script");e.style.opacity=0,e.innerHTML=`\n                    from js import Out\n\n                    ${a}\n                    `,this.#e.terminal.output.appendChild(e);break;case"javascript":a=a.replace(/console.log\(/g,"Out("),new JSexecuter(a).run()}return[1,""]},execute:e=>{if(e.length>1&&e[1].includes("alert"))return e[1].includes("disable")?localStorage.setItem("disableAlertExec",!0):localStorage.removeItem("disableAlertExec"),[1,'\n                <br>\n                <div>\n                    <span>Alert <span class="token title important">warning</span> updated</span>\n                </div>\n                <div>\n                    <span class="token comment">Disable it with <span class="token operator">execute disable-alert</span>.<br> Or enable it with <span class="token operator">execute enable-alert</span></span>\n                </div>\n                <br>\n                '];{if("undefined"==typeof JSexecuter){let t=document.createElement("script");return t.setAttribute("defer","true"),t.src=this.executer.javascript,document.body.appendChild(t),[0,`Execution failed due: Script loading...; Please execute again <a>${e.join(" ")}</a>`]}let t=e[1]||0,n=this.#e.window.config.windows[t];if(!n)return[0,`Window ${t} not found`];let s=`\n                    function runModule(){\n                        ${n.value}\n\n                        return "Script Loaded";\n                    }\n                `;return new JSexecuter(s).run(),localStorage.getItem("disableAlertExec")?[1,`\n                <span class="comment token">${runModule()}</span>\n                `]:[1,'\n                        <br>\n                        <div>\n                            <span>This action could be dangerous. Are you sure you want to execute it? <a href="javascript:runModule()">[yes]</a><a>[no]</a></span>\n                        </div>\n                        <div>\n                            <span class="token comment">By the way you can disable this alert with <span class="token operator">execute disable-alert</span>.<br> Or enable it with <span class="token operator">execute enable-alert</span></span>\n                        </div>\n                        <br>\n                    ']}}};getHistory(){return this.#t}}