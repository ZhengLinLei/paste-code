let setTabSize=t=>{document.querySelectorAll(".textarea div pre code").forEach(e=>{e.style.tabSize=""+(0!=t?t:4),e.style.MozTabSize=""+(0!=t?t:4)}),tabSize=t},tabSize=4,tabRegex=/\t/g;const ThemeArr=["light","dark","funky","twilight","solarized","night","zll"];let TMP_ID=0;function Out(e){document.querySelector("#"+TMP_ID).innerHTML+=e+"<br>"}window.addEventListener("load",()=>{var i=new LZMA("./js/src/lzma_worker.js");const s={url:document.location,base64:void 0,_get:{},localStorage:{fileMemory:"paste-code",autoExecuteFlag:"paste-code-auto-execute"}},d={parent:document.querySelector(".textarea"),max:4,min:1,label:"Window",current:0,focus:0,visible:0,windows:[],codeWindow:[],windows_value:[],lineActive:[]};let l=e=>{document.querySelector(".alert-modal").classList.add("active"),document.querySelector(".alert-modal-text").textContent=e,setTimeout(function(){document.querySelector(".alert-modal").classList.remove("active")},5e3)};const u=e=>{var e=e.value.split("\n")[0];return!!e.match(/[\!|\?]/)&&((e=(e=e.split(/[\!|\?]/))[e.length-1].toLowerCase()).includes("--\x3e")?e.replace("--\x3e","").trim():e)},a=e=>{var t=d.windows.indexOf(e),o=d.codeWindow[t],n=e.value.split("\n"),r=u(e);r&&o.setAttribute("class","language-"+r),tabRegex.test(e.value)&&(e.value=e.value.replaceAll(tabRegex," ".repeat(tabSize))),o.innerHTML=e.value.replaceAll(new RegExp("&","g"),"&amp;").replaceAll(new RegExp("<","g"),"&lt;"),Prism.highlightElement(o),document.querySelector(".w-"+t).style.setProperty("--padd",100<=n.length?1e3<=n.length?1e4<=n.length?"55px":"45px":"35px":"25px"),e.parentElement.querySelector(".line-numbers-rows").innerHTML=Array(n.length).fill("<span></span>").join(""),e===document.activeElement&&c(e)},c=(e,t=-1)=>{var o=e.value.substring(0,e.selectionStart).split("\n").length,n=e.parentElement.querySelector(".line-numbers-rows");o+t<n.children.length&&!n.children[o+t].classList.contains("current")&&(m(e),n.children[o+t].classList.add("current"))},m=e=>{e=e.parentElement.querySelector(".line-numbers-rows");Array.from(e.children).forEach(e=>{e.classList.remove("current")})};function p(){var e;d.parent.classList.remove("odd-3"),d.parent.classList.remove("odd-4"),3==d.visible&&(3==d.current?d.parent.classList.add("odd-3"):(!(e=["none"==d.windows[2].parentElement.style.display,"none"==d.windows[3].parentElement.style.display])[0]&&e[1]&&d.parent.classList.add("odd-3"),d.parent.classList.add("odd-4")))}const w=()=>{if(d.current<d.max){const n=document.createElement("div"),r=(n.addEventListener("click",()=>{var e=n.classList[0].replace("w-","");d.focus=e}),n.addEventListener("dblclick",()=>{if(1<d.visible){document.querySelector(".hidden-tab").classList.add("demo"),setTimeout(()=>document.querySelector(".hidden-tab").classList.remove("demo"),1e3),n.style.display="none",d.visible--,p();let t=document.createElement("a");t.onclick=e=>{n.style.display="block",t.remove(),d.focus=n.classList[0].replace("w-",""),d.visible++,p()};let o;try{o=n.querySelector("pre").classList[0].replace("language-","")}catch(e){o=""}t.innerHTML=`[${0<o.length&&"none"!=o?o.toUpperCase()+"-"+d.focus:d.focus}]`,document.querySelector(".hidden-tab").appendChild(t)}}),document.createElement("pre"));r.setAttribute("aria-hidden","true");var e,t=document.createElement("code");const o=document.createElement("span"),i=(o.setAttribute("aria-hidden","true"),o.setAttribute("class","line-numbers-rows no-select"),o.innerHTML="<span></span>",document.createElement("textarea"));return i.setAttribute("class","textarea-main"),i.setAttribute("spellcheck","false"),i.setAttribute("outline","none"),i.setAttribute("autofill","false"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("autocomplete","off"),i.setAttribute("wrap","off"),i.setAttribute("aria-label","Paste Code"),i.setAttribute("tabindex","0"),i.addEventListener("input",()=>a(i)),i.addEventListener("mouseup",()=>c(i)),("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&i.addEventListener("touchend",()=>c(i)),i.addEventListener("scroll",()=>{r.scrollTo(i.scrollLeft,i.scrollTop),o.scrollTo(i.scrollLeft,i.scrollTop)}),i.addEventListener("keydown",e=>{var t=(e,t)=>{var o=i.selectionStart;i.value=i.value.substring(0,o)+e+i.value.substring(i.selectionEnd),i.selectionStart=i.selectionEnd=o+t,a(i)},o=("Tab"!=e.key&&9!=e.keyCode&&9!=e.which||(e.preventDefault(),t(" ".repeat(tabSize),tabSize)),{"(":")","[":"]","{":"}",'"':'"',"'":"'","`":"`"}),o=(e.key in o&&t(o[e.key],0),(r.classList[0]??"").replace("language-","").toUpperCase());"<"!=e.key||"HTML"!=o&&"XML"!=o||t(">",0),"ArrowUp"!=e.key&&38!=e.keyCode&&38!=e.which||c(i,delay=-2),"ArrowDown"!=e.key&&40!=e.keyCode&&40!=e.which||c(i,delay=0),(e.altKey&&"l"==e.key||e.altKey&&76==e.keyCode||e.altKey&&76==e.which)&&(e.preventDefault(),o=i.value.substring(0,i.selectionStart).lastIndexOf("\n")+1,t=i.value.substring(i.selectionEnd).indexOf("\n")+i.selectionEnd,t+=t==i.value.length-1?1:0,i.setSelectionRange(o,t)),e.ctrlKey&&"s"===e.key&&(e.preventDefault(),S("url",!0,e=>{try{localStorage.setItem(s.localStorage.fileMemory,e),l("Content saved successfully")}catch(e){l("Error saving")}}))}),i.addEventListener("keyup",e=>{"Enter"!=e.key&&13!=e.keyCode&&13!=e.which&&"ArrowUp"!=e.key&&38!=e.keyCode&&38!=e.which&&"ArrowDown"!=e.key&&40!=e.keyCode&&40!=e.which&&"ArrowLeft"!=e.key&&37!=e.keyCode&&37!=e.which&&"ArrowRight"!=e.key&&39!=e.keyCode&&39!=e.which||c(i)}),i.addEventListener("focusout",()=>{m(i)}),r.appendChild(t),n.appendChild(o),n.appendChild(i),n.appendChild(r),d.parent.appendChild(n),d.windows.push(i),d.current++,d.visible++,d.parent.classList.remove("odd-3"),d.parent.classList.remove("odd-4"),p(),2!=d.current&&4!=d.current||((e=document.createElement("div")).classList.add("LR"),e.classList.add("LR-1"),n.appendChild(e)),2!=d.current&&3!=d.current&&4!=d.current||((e=document.createElement("div")).classList.add("TB"),e.classList.add("TB-"+(d.current-2)),n.appendChild(e)),d.codeWindow.push(t),n.classList.add("w-"+(d.current-1)),!0}0<d.visible&&(document.querySelector(".hidden-tab").classList.add("demo"),setTimeout(()=>document.querySelector(".hidden-tab").classList.remove("demo"),1e3))},h=()=>{if(d.current>d.min&&d.visible>d.min){for(;;){if("none"!=d.windows[d.focus].parentElement.style.display)break;0==d.focus?d.focus=d.current-1:d.focus--}const t=()=>{d.parent.removeChild(d.windows[d.focus].parentElement),d.windows=d.windows.filter((e,t)=>t!=d.focus),d.codeWindow=d.codeWindow.filter((e,t)=>t!=d.focus),d.current--,d.visible--,p(),d.windows.forEach((e,t)=>{e.parentElement.classList.remove(...e.parentElement.classList),e.parentElement.classList.add("w-"+t)}),document.querySelector(".hidden-tab").classList.add("demo"),setTimeout(()=>document.querySelector(".hidden-tab").classList.remove("demo"),1e3)};document.querySelector(".modal-text").textContent="Are you sure you want to remove the window ["+d.focus+"]?",document.querySelector(".container-modal .code").innerHTML="",document.querySelector(".container-modal .code").appendChild(d.codeWindow[d.focus].parentElement.cloneNode(!0)),document.querySelector(".container-modal").classList.add("show"),document.getElementById("confirm-modal").onclick=t,window.onkeydown=e=>{"Enter"!=e.key&&13!=e.keyCode&&"Enter"!=e.code&&13!=e.which||(t(),document.querySelector(".container-modal").classList.remove("show"),window.onkeydown=null)}}},g=()=>document.querySelector("body > footer").classList.remove("text-offer"),v=e=>{var t;return"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type?(t=(t=void 0===e.originalEvent?e:e.originalEvent).touches[0]||t.changedTouches[0],x=t.pageX,y=t.pageY):"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(x=e.clientX,y=e.clientY),{x:x,y:y}},f=(t,o,n=!1,r=null)=>{let i="y"===o;var e=v(t);let l,a,c,s=(c=n?(l=r,a=i?.9*window.innerHeight:.5*window.innerWidth,i?.1*window.innerHeight:.1*window.innerWidth):(l=i?document.querySelector("#terminal"):document.querySelector("#terminal-fast-option"),a=i?.8*window.innerHeight:.5*window.innerWidth,i?.2*window.innerHeight:.1*window.innerWidth),l.getBoundingClientRect()[i?"height":"width"]),d=e[o];e=e=>{["touchstart","touchmove","touchend","touchcancel"].includes(t.type)||e.preventDefault();e=v(e),document.body.classList.add(i?"row-resize":"col-resize"),document.body.classList.add("no-select"),e=s-(e[o]-d);e>c&&e<a&&(i?l.style.height=e+"px":n?r.style.width=e+"px":(document.documentElement||document.querySelector(":root")).style.setProperty("--termOption",e+"px"))};window.onmousemove=e,window.ontouchmove=e,window.onmouseup=()=>L(o,n),window.ontouchend=()=>L(o,n)},L=(e,t=!1)=>{e="y"===e;document.body.classList.remove(e?"row-resize":"col-resize"),document.body.classList.remove("no-select"),window.onmousemove=null,window.ontouchmove=null,window.onmouseup=null,window.ontouchend=null,t||localStorage.setItem(e?"terminalHeight":"terminalOptWidth",e?terminal.parentElement.parentElement.getBoundingClientRect().height:document.querySelector("#terminal-fast-option").getBoundingClientRect().width)},S=(o,n=!1,r)=>{d.windows.forEach((e,t)=>d.windows_value[t]=e.value),i.compress(JSON.stringify(d.windows_value),1,(e,t)=>{if(t)alert("Failed to compress data: "+t);else{let t=new FileReader;t.onload=function(){var e=t.result.substr(t.result.indexOf(",")+1);n?r(e):(e="https://"+s.url.host+s.url.pathname+"#"+e,e="markdown"===o?"[paste]("+e+")":e,"true"==localStorage.getItem(s.localStorage.autoExecuteFlag)&&(e+="?execute=true"),navigator.clipboard.writeText(e),document.querySelector(".nav-text-offer input").value=e,document.querySelector("body > footer").classList.add("text-offer"))},t.readAsDataURL(new Blob([new Uint8Array(e)]))}})};let b;const n=()=>{window.addEventListener("keydown",e=>{((e.metaKey||e.ctrlKey||e.altKey)&&"t"==e.key||(e.metaKey||e.ctrlKey||e.altKey)&&84==e.keyCode||(e.metaKey||e.ctrlKey||e.altKey)&&84==e.which)&&(e.preventDefault(),b())});const e=e=>{ThemeArr.includes(e)||(e=ThemeArr[0]),document.body.classList.remove(...ThemeArr),document.body.classList.add(e),localStorage.setItem("theme",e)};document.querySelector(".invert-color").addEventListener("click",()=>{document.body.classList.contains("dark")?e("light"):e("dark")}),0==d.current&&w(),document.querySelector("#add-w").addEventListener("click",w),document.querySelector("#remove-w").addEventListener("click",h),document.querySelectorAll(".generate-url").forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-type");S(e)})}),document.querySelector("a.cancel-url").addEventListener("click",g),document.querySelector("a.copy-url").addEventListener("click",()=>{document.querySelector(".nav-text-offer input").select(),document.execCommand("copy"),g()});const t=()=>{document.querySelector(".container-modal").classList.remove("show"),window.onkeydown=null},n=(document.querySelector(".container-modal .bg-event").addEventListener("click",t),["confirm-modal","cancel-modal"].forEach(e=>document.getElementById(e).addEventListener("click",t)),b=(e="toggle")=>{switch(e){case"open":document.querySelector("#terminal").classList.add("open"),o.focus();break;case"close":document.querySelector("#terminal").classList.remove("open");break;case"toggle":document.querySelector("#terminal").classList.toggle("open"),o.focus()}localStorage.setItem("terminal",!!document.querySelector("#terminal").classList.contains("open"))},(e=null)=>{a.historyPosition=0;var t=document.createElement("div");t.classList.add("terminal-input"),t.innerHTML=document.querySelector("#terminal-main-input").innerHTML,l.appendChild(t),t.removeChild(t.querySelector("button")),c.exec(e??r.innerText).then(e=>{var t;a.position=0,r.innerHTML="",(!e[0]||0<e[1].length)&&((t=document.createElement("div")).classList.add("terminal-output"),t.innerHTML=e[1],l.appendChild(t)),o.scrollTop=o.scrollHeight})}),o=document.querySelector("#terminal-main"),r=document.querySelector("#terminal-main-command"),i=document.querySelector("#terminal-caret"),l=document.querySelector("#terminal-main-history"),a={position:0,historyPosition:0},c=(document.querySelector("#open-t").addEventListener("click",()=>b("open")),document.querySelector("#close-t").addEventListener("click",()=>b("close")),o.addEventListener("focus",()=>{o.scrollTop=o.scrollHeight,i.classList.add("blink")}),o.addEventListener("blur",()=>i.classList.remove("blink")),o.addEventListener("keydown",e=>{var t;e.ctrlKey||e.metaKey||e.altKey||(e.preventDefault(),1==e.key.length&&(a.position+=1,r.innerText=r.innerText.slice(0,a.position-1)+e.key+r.innerText.slice(a.position-1))),"ArrowLeft"==e.key&&(a.position-=0<a.position?1:0),"ArrowRight"==e.key&&(a.position+=a.position<r.innerText.length?1:0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key||(t=i.getBoundingClientRect().width-2*parseFloat(getComputedStyle(i,null).getPropertyValue("border-left-width"))-1e-5,i.style.transform=`translateX(-${(r.innerText.length-a.position)*t}px)`),"ArrowUp"!=e.key&&"ArrowDown"!=e.key||(t=c.getHistory(),a.historyPosition+="ArrowUp"==e.key?a.historyPosition>=t.length?0:1:a.historyPosition<=0?0:-1,t=t[t.length-a.historyPosition],r.innerText=t||"",a.position=r.innerText.length),"v"==e.key&&(e.ctrlKey||e.metaKey)&&navigator.clipboard.readText().then(e=>{r.innerText=r.innerText.slice(0,a.position-1)+e+r.innerText.slice(a.position-1),a.position+=e.length}),"Backspace"!=e.key&&"Delete"!=e.key||(r.innerText=r.innerText.slice(0,a.position-1)+r.innerText.slice(a.position),a.position-=0==a.position?0:1),"Enter"!=e.key&&"Return"!=e.key&&"NumpadEnter"!=e.key||n()}),document.querySelectorAll(".terminal-option").forEach(o=>{o.addEventListener("click",()=>{return e=o.getAttribute("data-option"),t={add:["window add 1",1],remove:["window remove 1",1],exit:["exit",1],clear:["cls",1],help:["help",1],reset:["config reset",1],import:["config set <span class='token comment'>JSON</span>",0],export:["config get",1]},r.innerHTML=t[e][0],a.position=r.innerText.length,void(t[e][1]&&n());var e,t})}),["mousedown","touchstart"].forEach(e=>{document.querySelector("#scroll-height.terminal").addEventListener(e,e=>f(e,"y")),document.querySelector("#scroll-width.terminal-opt").addEventListener(e,e=>f(e,"x"))}),new Terminal({terminal:{main:o,input:r,output:l,caret:i,toggleFnc:b,config:a},window:{add:w,remove:h,config:d,getLang:u},theme:{list:ThemeArr,set:e},root:s}));if("execute"in s._get&&"true"==s._get.execute){document.querySelector(".modal-text").innerHTML="The auto-execute is <b>enabled</b>. This action could be dangerous.<br><br>Do you want to execute it?",document.querySelector(".container-modal .code").innerHTML="",document.querySelector(".container-modal .code").appendChild(d.codeWindow[0].parentElement.cloneNode(!0)),document.querySelector(".container-modal").classList.add("show");let t=()=>{b("open"),n("run 0")};document.getElementById("confirm-modal").onclick=t,window.onkeydown=e=>{"Enter"!=e.key&&13!=e.keyCode&&"Enter"!=e.code&&13!=e.which||(t(),document.querySelector(".container-modal").classList.remove("show"),window.onkeydown=null)}}};(fn=async()=>{var e=()=>{var e,t;(o??"").split("&").forEach(e=>{e=e.split("=");s._get[e[0]]=e[1]}),n(),localStorage.getItem("theme")&&document.body.classList.add(localStorage.getItem("theme")),localStorage.getItem("terminalHeight")&&(t=parseFloat(localStorage.getItem("terminalHeight")),e=.8*window.innerHeight,.2*window.innerHeight<t)&&t<e&&(document.documentElement||document.querySelector(":root")).style.setProperty("--termSize",t+"px"),localStorage.getItem("terminalOptWidth")&&(e=parseFloat(localStorage.getItem("terminalOptWidth")),t=.5*window.innerWidth,.1*window.innerWidth<e)&&e<t&&(document.documentElement||document.querySelector(":root")).style.setProperty("--termOption",e+"px"),"true"==localStorage.getItem("terminal")&&b("open"),localStorage.getItem("fontSize")&&5<=(t=parseFloat(localStorage.getItem("fontSize")))&&t<=35&&(document.documentElement||document.querySelector(":root")).style.setProperty("--font-size",t+"px")};let o;if([s.base64,o]=location.hash.substring(1).split("?"),0==s.base64.length||"undefined"==s.base64||!("fetch"in window)){if(!localStorage.getItem(s.localStorage.fileMemory))return void e();base64=localStorage.getItem(s.localStorage.fileMemory)}(async(e,n)=>{e=await(await fetch("data:application/octet-stream;base64,"+e)).blob();let t=new FileReader;t.onload=function(){var e=Array.from(new Uint8Array(t.result));i.decompress(e,function(e,t){t&&alert("Failed to decompress data: "+t);try{var o=JSON.parse(e);"object"==typeof o&&o.forEach((e,t)=>{w(),d.windows[t].value=e,a(d.windows[t])})}catch(t){alert("Failed to writing data: "+t)}n()})},t.readAsArrayBuffer(e)})(s.base64,e)})()});