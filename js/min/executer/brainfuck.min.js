function ASCI(){Memory.call(this),this.next=function(){return this._pointer+=1,this},this.previous=function(){return--this._pointer,this},this.get=function(){return void 0!==this._data[this._pointer]?this._data[this._pointer]:0},this.set=function(t){return this._data[this._pointer]=(t=t<0?0:t)%256,this},this.increase=function(){return void 0!==this._data[this._pointer]?(this._data[this._pointer]+=1,this._data[this._pointer]=this._data[this._pointer]%256):this._data[this._pointer]=1,this},this.decrease=function(){return void 0!==this._data[this._pointer]?this._data[this._pointer]=1<this._data[this._pointer]?this._data[this._pointer]-1:0:this._data[this._pointer]=0,this}}function Memory(){this._pointer=0,this._data={},this.reset=function(){this._pointer=0},this.clear=function(){this._pointer=0,this._data={}}}function Infinite(){Memory.call(this),this.next=function(){return this._pointer+=1,this},this.previous=function(){return--this._pointer,this},this.get=function(){return void 0!==this._data[this._pointer]?this._data[this._pointer]:0},this.set=function(t){return this._data[this._pointer]=t,this},this.increase=function(){return void 0!==this._data[this._pointer]?this._data[this._pointer]+=1:this._data[this._pointer]=1,this},this.decrease=function(){return void 0!==this._data[this._pointer]?--this._data[this._pointer]:this._data[this._pointer]=-1,this}}function Code(){this._pointer=0,this._source={},this._brackets={},this.get=function(){if(!(this._pointer>=this._source.length))return this._source[this._pointer]},this.next=function(){return this._pointer+=1,this.get()},this.previous=function(){return--this._pointer,this.get()},this.jumpMatching=function(){return void 0!==this._brackets[this._pointer]&&(this._pointer=this._brackets[this._pointer]),this},this.reset=function(){this._pointer=0},this.clear=function(){this._pointer=0,this._source={}},this.source=function(t){return void 0!==t?(this._source=t,this._optimize(),this):this._source},this._optimize=function(){var t,i,s=[];for(this._brackets={},t=0;t<this._source.length;t+=1)"["===this._source[t]?s.push(t):"]"===this._source[t]&&(i=s.pop(),this._brackets[i]=t,this._brackets[t]=i)}}function Brainfuck(t){this.memory=t,this.code=new Code,this._stop=!1,this._isRunning=!1,this._onOutput=function(t){process.stdout.write(String.fromCharCode(t))},this.onOutput=function(t){return this._onOutput=t,this},this.onInput=function(t){return this._onInput=t,this},this.stop=function(){this._stop=!0},this.isRunning=function(){return this._isRunning},this.reset=function(){return this.memory.reset=0,this.code.reset(),this},this.step=function(t){var i=this.code.get();return void 0===i?(this._run(t,!1),!1):(">"===i?this.memory.next():"<"===i?this.memory.previous():"+"===i?this.memory.increase():"-"===i?this.memory.decrease():"."===i?this._runAsync(this._onOutput,this.memory.get()):","===i?this.memory.set(this._run(this._onInput)):"["===i&&0===this.memory.get()?this.code.jumpMatching():"]"===i&&(this.code.jumpMatching(),this.code.previous()),this.code.next(),this._run(t,!0),!0)},this.run=function(t){this._isRunning=!0,this._stop?(this._isRunning=!1,this._run(t)):(this._stop=this._stop||!this.step(),this._runAsync(this.run,t))},this._runAsync=function(){var t=Array.prototype.slice.call(arguments);t.shift().apply(this,t)},this._run=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();if("function"==typeof i)return i.apply(this,t)}}ASCI.prototype=Object.create(Memory),ASCI.prototype.constructor=ASCI,Infinite.prototype=Object.create(Memory),Infinite.prototype.constructor=Infinite;